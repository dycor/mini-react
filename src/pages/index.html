<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <script type="module" src="../../main.js"></script>
        <title>Mini REACT</title>
    </head>
    <body>
        <div id="root"></div>
    </body>
<script type="module">


  //Components
  const Hello = function (name) {
    return (`<h1>${name}</h1>`);
  };
  
  class Component {

    constructor(props){
      console.log('Component constructor',props)
      console.log('proptypes',this)
    }

  }

  
  class Welcome extends Component {
    constructor(props) {
      super(props);
      console.log('Welcome constructor :',props)

    }
    render() {
      const name = Hello('Dylan');
      // return '<h1>Hello, {this.props.name}</h1>';
      return `<h1>Welcome </h1>${name}`;
    }
  }

  Welcome.prototype.propstype  = {
    hello :  "string",
  };

  //Router
  const Router = function () {
      let routes = {};

      this.addRoute = function (path,name) {
        routes[path] = name;
      }

      this.getAllroutes =  function () {
        return routes;
      }

      this.render = function () {
        let root  = document.getElementById('root');

        var path  = Object.keys(routes).find(function(url) {
          return  window.location.pathname === url;
        });

        if(path) {
          const component = routes[path];
          window.history.pushState(null,component,path);

          // const compToRender = new window[component]();
          // const compToRender  = new component();

          const compToRender  = new Welcome({hello :'hello'});


          root.innerHTML = compToRender.render();

        } else {
          root.innerHTML = '<h1> ERROR 404 </h1>';
        }
    }


    };

    const router = new Router();

    router.addRoute('/','Home');
    router.addRoute('/login','Login');
    router.render();

</script>
</html>